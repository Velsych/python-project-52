{% extends 'layout.html' %}
{% load django_bootstrap5 %}


{% block main %}
<div class="container wrapper flex-grow-1">
      


      <h1 class="my-4">
        
Задачи

      </h1>
          {% bootstrap_button button_type="link" content="Создать задачу" href="/tasks/create" %}
          <div class="card-body bg-light">
    <form class="form-inline center" method="get">
      <div class="card mb-4">
                <div class="card-body bg-light">
                        <div class="col-md-3">
                            <div class="form-group filter-status"> 
                               <label for="id_status" class="filter-label">Статус</label> 
                               {{ filter.form.status }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group filter-executor"> 
                                <label for="id_executor" class="filter-label">Исполнитель</label> 
                                {{ filter.form.executor }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group filter-labels"> 
                                <label for="id_labels" class="filter-label">Метка</label> 
                                {{ filter.form.labels }}
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-check">
                               <label class="form-check-label" for="{{ filter.form.self_tasks.auto_id }}">
                                   {{ filter.form.self_tasks.label }}
                                   {{ filter.form.self_tasks }}
                               </label>
                            </div>
                        </div>

                        <div class="col-12">
                            <button type="submit" class="btn btn-primary">Показать</button>
                            <a href="{% url 'index_tasks' %}" class="btn btn-outline-secondary">Сброс</a>
                        </div>
                </div>
            </div>
        <input class="btn btn-primary" type="submit" value="Показать">
    </form>
  </div>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Имя</th>
      <th>Статус</th>
      <th>Автор</th>
      <th>Исплонитель</th>
      <th>Дата создания</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
      <tr>
        <td>{{task.id}}</td>
        <td><a href="/tasks/{{task.id}}">{{task.name}}</a></td>
        <td>{{task.status}}</td>
        <td>{{task.author}}</td>
        <td>{{task.executor.get_full_name|default:task.executor.username|default:"—"}}</td>
        <td>{{task.created_at|date:"d.m.Y H:i"}}</td>
        <td>
          <a href="/tasks/{{task.id}}/update/">Изменить</a>
          <br>
          <a href="/tasks/{{task.id}}/delete/">Удалить</a>
        </td>
      </tr>
    {% endfor %}
    
  </tbody>
</table>

    </div>
{% endblock %}